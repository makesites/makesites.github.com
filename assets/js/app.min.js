/*! app 04-08-2013 */
(function(t,e){t.isUndefined(e.UI)&&(e.UI={});var i="undefined"==typeof APP||t.isUndefined(APP.View)?e.View:APP.View;e.UI.Header=i.extend({el:"body",options:{headerEl:".top",mainEl:".main",detatch:!1,detatchOffset:0,hide:!1,hideDir:"down"},events:{},headerScroll:function(){this.lastScroll=this.lastScroll||0;var t=$(window).scrollTop();this.scrollDir=t>this.lastScroll?"down":"up",this.lastScroll=t,this.options.hide&&("down"==this.options.hideDir&&("down"==this.scrollDir&&t>0?($(this.options.headerEl).addClass("ui-header-hide"),this.translateTop(-1*$(this.options.headerEl).height())):($(this.options.headerEl).removeClass("ui-header-hide"),this.translateTop())),"up"==this.options.hideDir&&("up"==this.scrollDir&&t>0?($(this.options.headerEl).addClass("ui-header-hide"),this.translateTop(-1*$(this.options.headerEl).height())):($(this.options.headerEl).removeClass("ui-header-hide"),this.translateTop()))),this.options.detatch&&!$(this.options.headerEl).hasClass("ui-header-hide")&&(t>this.options.detatchOffset?$(this.options.headerEl).addClass("detatch"):$(this.options.headerEl).removeClass("detatch"))},initialize:function(){t.bindAll(this,"render","headerScroll"),$(window).scroll(this.headerScroll)},translateTop:function(t){t=t||0,$(this.options.headerEl).css("-webkit-transform","translate(0,"+t+"px)"),$(this.options.headerEl).css("-moz-transform","translate(0,"+t+"px)"),$(this.options.headerEl).css("-o-transform","translate(0,"+t+"px)"),$(this.options.headerEl).css("transform","translate(0,"+t+"px)")}})})(this._,this.Backbone),!function(t){"use strict";function e(e,i){var s,n=t.proxy(this.process,this),o=t(e).is("body")?t(window):t(e);this.options=t.extend({},t.fn.scrollspy.defaults,i),this.$scrollElement=o.on("scroll.scroll-spy.data-api",n),this.selector=(this.options.target||(s=t(e).attr("href"))&&s.replace(/.*(?=#[^\s]+$)/,"")||"")+" .nav li > a",this.$body=t("body"),this.refresh(),this.process()}e.prototype={constructor:e,refresh:function(){var e,i=this;this.offsets=t([]),this.targets=t([]),e=this.$body.find(this.selector).map(function(){var e=t(this),i=e.data("target")||e.attr("href"),s=/^#\w/.test(i)&&t(i);return s&&s.length&&[[s.position().top,i]]||null}).sort(function(t,e){return t[0]-e[0]}).each(function(){i.offsets.push(this[0]),i.targets.push(this[1])})},process:function(){var t,e=this.$scrollElement.scrollTop()+this.options.offset,i=this.$scrollElement[0].scrollHeight||this.$body[0].scrollHeight,s=i-this.$scrollElement.height(),n=this.offsets,o=this.targets,a=this.activeTarget;if(e>=s)return a!=(t=o.last()[0])&&this.activate(t);for(t=n.length;t--;)a!=o[t]&&e>=n[t]&&(!n[t+1]||n[t+1]>=e)&&this.activate(o[t])},activate:function(e){var i,s;this.activeTarget=e,t(this.selector).parent(".active").removeClass("active"),s=this.selector+'[data-target="'+e+'"],'+this.selector+'[href="'+e+'"]',i=t(s).parent("li").addClass("active"),i.parent(".dropdown-menu").length&&(i=i.closest("li.dropdown").addClass("active")),i.trigger("activate")}},t.fn.scrollspy=function(i){return this.each(function(){var s=t(this),n=s.data("scrollspy"),o="object"==typeof i&&i;n||s.data("scrollspy",n=new e(this,o)),"string"==typeof i&&n[i]()})},t.fn.scrollspy.Constructor=e,t.fn.scrollspy.defaults={offset:10},t(window).on("load",function(){t('[data-spy="scroll"]').each(function(){var e=t(this);e.scrollspy(e.data())})})}(window.jQuery),function(t){function e(e,i,s){var n=i.hash.slice(1),o=document.getElementById(n)||document.getElementsByName(n)[0];if(o){e&&e.preventDefault();var a=t(s.target);if(!(s.lock&&a.is(":animated")||s.onBefore&&s.onBefore.call(s,e,o,a)===!1)){if(s.stop&&a.stop(!0),s.hash){var r=o.id==n?"id":"name",l=t("<a> </a>").attr(r,n).css({position:"absolute",top:t(window).scrollTop(),left:t(window).scrollLeft()});o[r]="",t("body").prepend(l),location=i.hash,l.remove(),o[r]=n}a.scrollTo(o,s).trigger("notify.serialScroll",[o])}}}var i=location.href.replace(/#.*/,""),s=t.localScroll=function(e){t("body").localScroll(e)};s.defaults={duration:1e3,axis:"y",event:"click",stop:!0,target:window,reset:!0},s.hash=function(i){if(location.hash){if(i=t.extend({},s.defaults,i),i.hash=!1,i.reset){var n=i.duration;delete i.duration,t(i.target).scrollTo(0,i),i.duration=n}e(0,location,i)}},t.fn.localScroll=function(n){function o(){return!(!this.href||!this.hash||this.href.replace(this.hash,"")!=i||n.filter&&!t(this).is(n.filter))}return n=t.extend({},s.defaults,n),n.lazy?this.bind(n.event,function(i){var s=t([i.target,i.target.parentNode]).filter(o)[0];s&&e(i,s,n)}):this.find("a,area").filter(o).bind(n.event,function(t){e(t,this,n)}).end().end()}}(jQuery),Handlebars.registerHelper("fontSize",function(t,e){var i=3,s=t/e*i;return s+"em"}),function(){APP.Routers.Default=APP.Router.extend({data:{},initialize:function(){_.bindAll(this,"index"),$(".navbar").scrollspy()},routes:{"":"index",":page":"index"},index:function(){var t=new APP.Collections.Users,e=new APP.Collections.Tags,i={users:t,tags:e};new APP.Views.Main({data:i})}})}(),function(t,e){APP.Models.Main=APP.Model.extend({defaults:{},initialize:function(){}}),APP.Models.User=APP.Model.extend({defaults:{},initialize:function(){}}),APP.Models.Tag=APP.Model.extend({defaults:{},initialize:function(){}}),APP.Collections.Users=e.Collection.extend({model:APP.Models.User,url:"https://api.github.com/orgs/makesites/members",initialize:function(){this.fetch()}}),APP.Collections.Tags=e.Collection.extend({model:APP.Models.Tag,url:"https://api.github.com/orgs/makesites/repos?type=public",initialize:function(){this.fetch()},parse:function(e){var s={},n=[],o=0;for(i in e){var a=e[i].description,r=a.match(/(^#|[^&]#)([a-z0-9]+)/gi);for(j in r){var l=r[j].substr(2);s[l]=t.isUndefined(s[l])?1:s[l]+1,s[l]>o&&(o=s[l])}}for(l in s){var h={name:l,count:s[l]};n.push(h)}return this.max=o,n}})}(this._,this.Backbone),function(t,e){APP.Views.Main=APP.View.extend({el:"body",events:{"click a[rel='external']":"clickExternal","click .link":"selectLink",scroll:"bgChange"},initialize:function(e){t.bindAll(this,"render","clickExternal","selectLink","bgChange","preloader","monitorHeight"),$(window).scroll(this.bgChange),this.views={},this.backgrounds=["bg1.jpg","bg2.jpg","bg3.jpg","bg4.jpg"],this.preloader(),this.monitorHeight(),this.views.users=new APP.Views.Users({collection:e.data.users}),this.views.tags=new APP.Views.Tags({collection:e.data.tags}),$(this.el).find("header.top nav > ul, .section-buttons, .localscroll").localScroll({hash:!0}),new APP.Views.Header({detatch:!0,hide:!0}),this.render()},render:function(){return $("body").removeClass("loading"),this},preloader:function(){imageObj=new Image;for(i in this.backgrounds)imageObj.src="/assets/img/backgrounds/"+this.backgrounds[i]},bgChange:function(){var t=$(window).scrollTop(),e=t/(2*this.pageHeight),i=Math.floor(e);void 0!==this.backgrounds[i]&&$("body").css("background-image","url(/assets/img/backgrounds/"+this.backgrounds[i]+")")},monitorHeight:function(){var t=this;this.pageHeight=$(window).height(),$(window).resize(function(){t.pageHeight=$(window).height()})},clickExternal:function(t){t.preventDefault();var e=this.findLink(t.target);return window.open(e,"_blank"),!1},selectLink:function(t){var e=this.findLink(t.target);$(this.el).find("nav li").removeClass("active"),$(this.el).find("nav a:[href="+e+"]").closest("li").addClass("active")},findLink:function(t){return"A"!=t.tagName?$(t).closest("a").attr("href"):$(t).attr("href")}}),APP.Views.Header=e.UI.Header.extend({}),APP.Views.Users=APP.View.extend({el:"#git-members",events:{},initialize:function(){t.bindAll(this,"render"),this.template=Handlebars.compile($(this.el).find("script").html()),this.render(),this.collection.bind("reset",this.render)},render:function(){var t=this.template(this.collection.toJSON());$(this.el).html(t)}}),APP.Views.Tags=APP.View.extend({el:"#tagcloud",events:{},initialize:function(){t.bindAll(this,"render"),this.template=Handlebars.compile($(this.el).find("script").html()),this.render(),this.collection.bind("reset",this.render)},render:function(){var t=this.template({tags:this.collection.toJSON(),max:this.collection.max});$(this.el).html(t)}})}(this._,this.Backbone);